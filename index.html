<!DOCTYPE html>
<html dir="ltr" lang="fr-FR">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>eventManager tests</title>
  <link href="css/style.css" rel="stylesheet" media="screen">
  <script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js"></script>
  <script src="js/eventManager.plugin.js"></script>
  <script>
    // list of all the events
    var eventList = {
       // global-selector
       'p' : {
          // events
          click: {
             // filtered selector
             '.testclass' : function (event) {
                alert('.testclass! attached event -> '+event.type);
             },

             default : function () {
                alert('this is the default event attached to the paragraph !');
             }
          }
       },
       
       'a' : {
          // events
          click: {
             // filtered selector
             '.test' : function (event) {
                alert('.test! attached event -> '+event.type);
             },

             default : function () {
                return false;
             }
          }
       },

       '#treat-functions-as-default': {
         mouseover: function() {
           $(this).css('background-color', 'yellow');
         },
         mouseout: function() {
           $(this).css('background-color', 'transparent');
         }
       },

       'input[type=text]' : {
         change : {
           default : function() {
             $(this).data('modified',true);
           }
         },
         focusin : {
           default : function() {
             $(this).prev().prev('legend').css('color','red');
             if (!$(this).data('modified')) {
                $(this)
                  .data('val',$(this).val())
                  .val('');
             }
           }
         },
         focusout : {
           default : function() {
             $(this).prev().prev('legend').css('color','black');
             if ($(this).val() == '') {
                $(this)
                  .val($(this).data('val'))
                  .data('val',$(this).val())
                  .data('modified',false);
             }
           }
         }
       },

       'form label' : {
          mouseover : {
            default : function() {
              $(this).css('font-weight','bold');
            }
          },
          mouseout : {
            default : function() {
              $(this).css('font-weight','normal');
            }
          }
       },

       ':header' : {
         mouseover: {
           'h2' :  function() {
             $(this).css('background-color','yellow');
           },
           'h3' :  function() {
             $(this).stop().animate({'font-size':'2.5em'},500);
           }
         },
         mouseout: {
           'h3' :  function() {
             $(this).stop().animate({'font-size':'1.6em'},500);
           },
           default : function() {
             $(this).css('background-color','transparent');
           }
         }
       },

       'div.code span' : {
         click : {
           default : function() {
             $(this)
              .text(($(this).next('pre').is(':visible')) ? 'Show code' : 'Hide code')
              .next('pre').toggle();
           }
         }
       }
    }

    $(document).ready(function() {
      $('div.code pre').hide();
      $('body').eventManager(eventList);
    });
  </script>
</head>
<body>
  <div>
    <h1>Event tests</h1>
    <h2>A title example (level 2)</h2>
    <h3>Another title example (level 3)</h3>

    <div class="code">
      <span>Show code</span>
      <pre>
        $('body').eventManager({
          ':header' : {
            mouseover: {
              'h2' :  function(elem) {
                $(this).css('background-color','yellow');
              },
              'h3' :  function(elem) {
                $(this).stop().animate({'font-size':'2.5em'},500);
              }
            },
            mouseout: {
              'h3' :  function(elem) {
                $(this).stop().animate({'font-size':'1.6em'},500);
              },
              default : function(elem) {
                $(this).css('background-color','transparent');
              }
            }
          }
        });
      </pre>
    </div>
    <p><strong>p</strong> event attached: click</p>
    <p class="testclass"><strong>p.testclass &amp; p</strong> event attached: click</p>
    <div class="code">
      <span>Show code</span>
      <pre>
        $('body').eventManager({
          'p' : {
             click: {
                '.testclass' : function (elem,event) {
                   alert('.testclass! attached event -> '+event.type);
                },

                default : function () {
                   alert('this is the default event attached to the paragraph !');
                }
             }
          }
        });
      </pre>
    </div>

    <form method="get" action="#">
      <fieldset>
        <legend>Form example</legend>
        <label>Label test</label>
        <input type="text" value="Enter your text" />
      </fieldset>
    </form>

    <div class="code">
      <span>Show code</span>
      <pre>
        $('body').eventManager({
          'input[type=text]' : {
            change : {
              default : function(elem) {
                $(this).data('modified',true);
              }
            },
            focusin : {
              default : function(elem) {
                $(this).prev().prev('legend').css('color','red');
                if (!$(this).data('modified')) {
                   $(this)
                     .data('val',$(this).val())
                     .val('');
                }
              }
            },
            focusout : {
              default : function(elem) {
                $(this).prev().prev('legend').css('color','black');
                if ($(this).val() == '') {
                   $(this)
                     .val($(this).data('val'))
                     .data('val',$(this).val())
                     .data('modified',false)
                }
              }
            }
          },

          'form label' : {
             mouseover : {
               default : function(elem) {
                 $(this).css('font-weight','bold');
               }
             },
             mouseout : {
               default : function(elem) {
                 $(this).css('font-weight','normal');
               }
             }
          }
        });
      </pre>
    </div>


    <p><a class="test" href="http://google.fr">Example of link</a></p>
    <div class="code">
      <span>Show code</span>
      <pre>
        $('body').eventManager({
          'a' : {
             // events
             click: {
                // filtered selector
                '.test' : function (event) {
                   alert('.test! attached event -> '+event.type);
                },

                default : function () {
                   return false;
                }
             }
          }
        });
    </pre>
    </div>

    <div id="treat-functions-as-default"><p>Treat functions as default</p></div>
    <div class="code">
      <span>Show code</span>
      <pre>
        $('body').eventManager({
          '#treat-functions-as-default': {
            mouseover: function(elem) {
              $(this).css('background-color', 'yellow')
            },
            mouseout: function(elem) {
              $(this).css('background-color', 'transparent')
            }
          }
        });
      </pre>
    </div>
  </div>
</body>
</html>